version: 2

models:
  - name: silver__dim_customers
    description: "Dimension table for customer entity (one row per customer)"
    columns:
      - name: customer_id
        data_type: string
        description: "ID of customer (primary key)"
      - name: customer_signup_date
        data_type: date
        description: "Sign-up date for customer"
      - name: customer_status
        data_type: string
        description: "Customer status"
      - name: customer_region
        data_type: string
        description: "Customer region"

  - name: silver__dim_plans
    description: "Dimension table for plan entity (one row per plan)"
    columns:
      - name: plan_id
        data_type: string
        description: "ID of plan (primary key)"
      - name: plan_name
        data_type: string
        description: "Name of plan"
      - name: plan_monthly_price
        data_type: decimal(10,2)
        description: "Monthly cost of plan"

  - name: silver__fact_subscriptions
    description: "Fact table for subscription records (one row per customer & plan)"
    columns:
      - name: subscription_id
        data_type: string
        description: "ID of subscription (primary key)"
      - name: customer_id
        data_type: string
        description: "ID of customer (foreign key to silver__dim_customers)"
        tests:
          - not_null
          - relationships: # enforce foreign key integrity
              arguments:
                to: ref('silver__dim_customers')
                field: customer_id
      - name: plan_id
        data_type: string
        description: "ID of plan (foreign key to silver__dim_plans)"
        tests:
          - not_null
          - relationships: # enforce foreign key integrity
              arguments:
                to: ref('silver__dim_plans')
                field: plan_id
      - name: subscription_start_date
        data_type: date
        description: "Start date of subscription"
      - name: subscription_end_date
        data_type: date
        description: "End date of subscription (null if active subscription)"
      - name: plan_monthly_price
        data_type: decimal(10,2)
        description: "Monthly cost of plan"
